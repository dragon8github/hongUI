{"version":3,"sources":["Message/src/Message.js"],"names":["window","hongAPI","isLoadFinish","styleOnload","node","callback","attachEvent","setTimeout","poll","isLoaded","test","navigator","userAgent","cssRules","ex","code","getPath","jsPath","document","currentScript","src","js","scripts","last","length","i","readyState","substring","lastIndexOf","linkStyle","v","head","getElementsByTagName","linkTag","createElement","href","setAttribute","appendChild","setStyle","cssname","args","Object","prototype","toString","call","arguments","Array","map","linksOnload","links","cb","_arguments","link","shift","callee","win","Vue","typeMap","success","info","warning","error","Message","extend","template","data","visible","message","duration","type","iconClass","customClass","onClose","showClose","closed","timer","dangerouslyUseHTMLString","center","computed","iconWrapClass","classes","push","typeClass","watch","newVal","$el","addEventListener","destroyElement","methods","removeEventListener","$destroy","parentNode","removeChild","close","clearTimer","clearTimeout","startTimer","keydown","e","keyCode","mounted","beforeDestroy","MessageConstructor","instance","instances","seed","zIndex","MyMessage","options","userOnClose","id","vm","$mount","dom","style","body","console","log","forEach","len","splice","closeAll"],"mappings":"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","file":"Message.js","sourcesContent":[";window.hongAPI = (function () {\n\n   var isLoadFinish = false;\n\n   // seajs的解决方案\n   var styleOnload = function (node, callback) {\n       if (node.attachEvent) {  // for IE6-9 and Opera\n           node.attachEvent('onload', callback);\n       } else { \n           setTimeout(function() {\n               poll(node, callback);\n           }, 0); // for cache\n       }\n   };\n\n   // polling for Firefox, Chrome, Safari\n   var poll = function (node, callback) {\n               var isLoaded = false;\n               if (/webkit/i.test(navigator.userAgent)) { // webkit\n                   if (node['sheet']) {\n                       isLoaded = true;\n                   }\n               } else if (node['sheet']) {  // for Firefox\n                   try {\n                       if (node['sheet'].cssRules) {\n                           isLoaded = true;\n                       }\n                   } catch (ex) {\n                       if (ex.code === 1000) { // NS_ERROR_DOM_SECURITY_ERR\n                           isLoaded = true;\n                       }\n                   }\n               }\n               if (isLoaded) {\n                   setTimeout(function() {  // give time to render.\n                       callback();\n                   }, 1); \n               } else {\n                   setTimeout(function() {\n                       poll(node, callback);\n                   }, 1);\n               }\n   };\n\n   // 获取当前js的路径\n   var getPath = function() {\n       var jsPath = document.currentScript ? document.currentScript.src : function() {\n           var js = document.scripts, last = js.length - 1, src;\n           for (var i = last; i > 0; i--) { \n                if (js[i].readyState === 'interactive') { \n                    src = js[i].src; \n                    break; \n                } \n            }\n           return src || js[last].src;\n       }();\n       return jsPath.substring(0, jsPath.lastIndexOf('/') + 1);\n   }();\n\n   // 插入css\n   var linkStyle = function(v) {\n       var head = document.getElementsByTagName('head')[0];\n       linkTag = document.createElement('link');\n       linkTag.href = getPath + v;\n       linkTag.setAttribute('rel', 'stylesheet');\n       linkTag.setAttribute('type', 'text/css');\n       head.appendChild(linkTag);\n       return linkTag;\n   };\n\n   // 加载样式文件\n   var setStyle = function(cssname) {\n      var args = Object.prototype.toString.call(cssname) === '[object Array]' ? cssname : arguments;\n      return Array.prototype.map.call(args, function (v) {\n         return linkStyle(v)\n      })\n   };\n\n   // 如果css加载完毕，那么执行回调\n   var linksOnload = function (links, cb) {\n       if (!isLoadFinish) {\n           (function (args) {\n               var _arguments = arguments;\n               var link = Array.prototype.shift.call( args );\n               styleOnload(link, function () {\n                   if (args.length === 0) {\n                       if (typeof(cb) === 'function') {\n                           isLoadFinish = true;\n                           cb();\n                       }\n                   } else {\n                       _arguments.callee(args)\n                   }\n               })\n           })(Object.prototype.toString.call(links) === '[object Array]' ? links : arguments);\n       } else {\n            if (typeof(cb) === 'function') {\n                cb();\n            }\n       }\n   };\n\n   return {\n        setStyle: setStyle,\n        linksOnload: linksOnload\n   }\n})();\n\n;(function (win, Vue) {\n    'use strict';\n\n    const typeMap = {success: 'success', info: 'info', warning: 'warning', error: 'error'};\n    var Message = Vue.extend({\n        template: `\n          <transition name=\"hong-message-fade\">\n              <div :class=\"[\n                      'hong-message',\n                      type && !iconClass ? 'hong-message--' + type : '',\n                      center ? 'is-center' : '',\n                      showClose ? 'is-closable' : '',\n                      customClass\n                  ]\"\n                  v-show=\"visible\"\n                  @mouseenter=\"clearTimer\"\n                  @mouseleave=\"startTimer\"\n                  role=\"alert\"\n              >\n                <i :class=\"iconClass\" v-if=\"iconClass\"></i>\n                <i :class=\"typeClass\" v-else></i>\n                <slot>\n                    <p v-if=\"!dangerouslyUseHTMLString\" class=\"hong-message__content\">{{ message }}</p>\n                    <p v-else v-html=\"message\" class=\"hong-message__content\"></p>\n                </slot>\n                <i v-if=\"showClose\" class=\"hong-message__closeBtn hong-icon-close\" @click=\"close\"></i>\n              </div>\n            </transition>\n        `,\n        data() {\n              return {\n                visible: false,\n                message: '',\n                duration: 3000,\n                type: 'info',\n                iconClass: '',\n                customClass: '',\n                onClose: null,\n                showClose: false,\n                closed: false,\n                timer: null,\n                dangerouslyUseHTMLString: false,\n                center: false\n              };\n        },\n        computed: {\n             iconWrapClass() {\n               const classes = ['hong-message__icon'];\n               if (this.type && !this.iconClass) {\n                 classes.push(`hong-message__icon--${ this.type }`);\n               }\n               return classes;\n             },\n             typeClass() {\n               return this.type && !this.iconClass\n                 ? `hong-message__icon hong-icon-${ typeMap[this.type] }`\n                 : '';\n             }\n         },\n         watch: {\n             closed(newVal) {\n               if (newVal) {\n                 this.visible = false;\n                 this.$el.addEventListener('transitionend', this.destroyElement);\n               }\n             }\n         },\n         methods: {\n             // get~ 销毁组件\n             destroyElement() {\n               this.$el.removeEventListener('transitionend', this.destroyElement);\n               this.$destroy(true);\n               this.$el.parentNode.removeChild(this.$el);\n             },\n             close() {\n               this.closed = true;\n               if (typeof this.onClose === 'function') {\n                 this.onClose(this);\n               }\n             },\n             clearTimer() {\n               clearTimeout(this.timer);\n             },\n             startTimer() {\n               if (this.duration > 0) {\n                 this.timer = setTimeout(() => {\n                   if (!this.closed) {\n                     this.close();\n                   }\n                 }, this.duration);\n               }\n             },\n             keydown(e) {\n                // esc关闭消息\n               if (e.keyCode === 27) {\n                 if (!this.closed) {\n                   this.close();\n                 }\n               }\n             }\n         },\n         mounted() {\n              this.startTimer();\n              document.addEventListener('keydown', this.keydown);\n         },\n         beforeDestroy() {\n              document.removeEventListener('keydown', this.keydown);\n         }\n    });\n\n    var MessageConstructor = Vue.extend(Message);\n    var instance;\n    var instances = [];\n    var seed = 1;\n    var zIndex = 199307100337;\n    var links = hongAPI.setStyle(\"icon.css\", \"Message.css\");\n\n    // TODO:外部如何获取实例？\n    // 知识点\n    // 插入页面的$el dom 示例也会被引用关联。也就是说，哪怕插入了。我修改了$el。那么dom也会受到影响。\n    // 虽然我知道。但还是很少用觉得很神奇。\n    // 问题: 为何插入网页会造成这样？\n    const MyMessage = function (options) {\n        options = options || {};\n        if (typeof options === 'string') { options = {message: options }; }\n        var userOnClose = options.onClose;\n        var id = 'message_' + seed++;\n        options.onClose = function() { MyMessage.close(id, userOnClose); };\n        instance = new MessageConstructor({ data: options });\n        instance.id = id;\n        // 知识点，手动挂载$mount()\n        // 如果没有挂载的话，没有关联的 DOM 元素。是获取不到$el的。\n        instance.vm = instance.$mount();\n        instance.dom = instance.vm.$el;  \n        instance.dom.style.zIndex = zIndex++;\n        // 知识点：向网页插入元素并不会触发<transition name=\"hong-message-fade\">\n        // 官方说只有v-if和v-show才会触发。那就是说，真正的触发时机是instance.vm.visible = true;的时候\n        // 我之所以会认为插入页面也会触发，是因为被路由误导了吧。事实上transition对路由也是特殊处理的\n        // 总结一下，一共三个东西会触发transition， v-if、v-show、还有路由<router-view></router-view>\n        document.body.appendChild(instance.vm.$el);\n        instances.push(instance);\n        hongAPI.linksOnload(links, function () {\n            console.log(1)\n            instance.vm.visible = true;\n        })\n        return instance.vm;\n    };\n\n    // 学到新知识，可以靠这种方式，快速开发出类似如下语句：\n    // this.Message.error('错了哦，这是一条错误消息');\n    // this.Message.info('警告哦，这是一条警告消息');\n    ['success', 'warning', 'info', 'error'].forEach(type => {\n        MyMessage[type] = options => {\n          if (typeof options === 'string') {\n            options = {\n              message: options\n            };\n          }\n          options.type = type;\n          return MyMessage(options);\n        };\n    });\n\n    MyMessage.close = function(id, cb) {\n      hongAPI.linksOnload(links, function () {\n         for (var i = 0, len = instances.length; i < len; i++) {\n            if (id === instances[i].id) {\n              console.log(2)\n              instances[i].closed = true;\n              if (typeof cb === 'function') {\n                cb(instances[i]);\n              }\n              instances.splice(i, 1);\n              break;\n            }\n          }\n      })\n      \n    };\n\n    MyMessage.closeAll = function() {\n      for (var i = instances.length - 1; i >= 0; i--) {\n        instances[i].close();\n      }\n    };\n\n    window.Message = MyMessage;\n    Vue.prototype.Message = MyMessage;\n\n})(window, Vue);"]}