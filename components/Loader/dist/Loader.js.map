{"version":3,"sources":["Loader/src/Loader.js"],"names":["getPath","jsPath","document","currentScript","src","js","scripts","last","length","i","readyState","substring","lastIndexOf","setStyle","cssname","head","getElementsByTagName","linkTag","createElement","href","setAttribute","appendChild","win","Vue","Spinner","extend","template","props","size","type","Number","default","color","String","borderWidth","computed","spinnerColor","$parent","spinnerSize","spinnerBoderWidth","Loader","data","visible","text","components","myLoader","instance","idlader_arr","show","options","id","myinstance","entries","index","ele","Object","keys","values","el","push","spinnerType","body","$el","nextTick","hide","hideAll","prototype","window"],"mappings":"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","file":"Loader.js","sourcesContent":["// 获取当前js文件所在的路径\nvar getPath = function(){var jsPath = document.currentScript ? document.currentScript.src : function(){var js = document.scripts ,last = js.length - 1 ,src; for(var i = last; i > 0; i--){if(js[i].readyState === 'interactive'){src = js[i].src; break; } } return src || js[last].src; }(); return jsPath.substring(0, jsPath.lastIndexOf('/') + 1); }();\n// 加载样式文件\nvar setStyle = function (cssname) {var head = document.getElementsByTagName('head')[0]; const linkTag = document.createElement('link'); linkTag.href = getPath + cssname; linkTag.setAttribute('rel','stylesheet'); linkTag.setAttribute('type','text/css'); head.appendChild(linkTag); }\n\n;(function (win, Vue) {\n    'use strict';\n\n    setStyle(\"Loader.css\")\n\n    var Spinner = Vue.extend({\n        template: `\n          <div class=\"hong-spinner-snake\" :style=\"{\n                'border-top-color': spinnerColor,\n                'border-left-color': spinnerColor,\n                'border-bottom-color': spinnerColor,\n                'height': spinnerSize,\n                'width': spinnerSize\n          }\">\n          </div>`,\n        props: {\n            size: {\n              type: Number,\n              default: 40\n            },\n            color: {\n              type: String,\n              default: '#ccc'\n            },\n            borderWidth: {\n              type: Number,\n              default: 7\n            }\n        },\n        computed: {\n          spinnerColor() {\n            return this.color || this.$parent.color || '#ccc';\n          },\n          spinnerSize() {\n            return (this.size || this.$parent.size || 28) + 'px'; \n          },\n          spinnerBoderWidth () {\n            return (this.borderWidth || this.$parent.borderWidth || 4) + 'px' \n          }\n        }\n    })\n\n    var Loader = Vue.extend({\n       template: `\n           <transition name=\"hong-loader\">\n               <div class=\"hong-loader\" v-show=\"visible\">\n                 <div class=\"hong-loader-wrapper\">\n                   <spinner :show=\"true\"></spinner>\n                   <span class=\"hong-loader-text\" v-show=\"text\">{{ text }}</span>\n                 </div>\n                 <div class=\"hong-loader-mask\" @touchmove.stop.prevent></div>\n               </div>\n           </transition>\n       `,\n       data: function () {\n           return {\n               visible: false,\n               text: ''\n           }\n       },\n       components: {\n         Spinner\n       }\n   });\n\n   var myLoader = {};\n   var instance;\n   var idlader_arr = [];\n   myLoader.show = function(options = {}, id = '') {\n      // 我自己添加的模式，如果存在id，那么也需要id才可以关闭\n      if (id) {\n          // 新建一个属于自己的Loader\n          let myinstance;\n\n          // 从缓存中遍历看看有没有和id一样的Loader，如果有的话直接从缓存取即可\n          for (let [index,ele] of idlader_arr.entries()) {\n              if (Object.keys(ele)[0] + '' == id) {\n                  myinstance = Object.values(ele)[0]\n                  break;\n              }\n          }\n\n          // 如果缓存没有则新建一个\n          myinstance = myinstance || new Loader({ el: document.createElement('div') });\n\n          // 加入到缓存中\n          idlader_arr.push( { [id]: myinstance})\n\n          // 设置文本\n          myinstance.text = typeof options === 'string' ? options : options.text || '';\n          \n          // 设置形状，默认为snake（其实已经写死为snake了）\n          myinstance.spinnerType = options.spinnerType || 'snake';\n\n          // 插入body中\n          document.body.appendChild(myinstance.$el);\n\n          // 等待加载完成就显示出来\n          Vue.nextTick(() => {\n              myinstance.visible = true;\n          });\n\n      } else {\n\n        // 单例模式\n        if (!instance) {\n            instance = new Loader({\n              el: document.createElement('div')\n            });\n        }\n\n        // 如果已经在显示中，那么返回\n        if (instance.visible) return;\n\n        // 设置文本\n        instance.text = typeof options === 'string' ? options : options.text || '';\n        \n        // 设置形状，默认为snake（其实已经写死为snake了）\n        instance.spinnerType = options.spinnerType || 'snake';\n\n        // 插入body中\n        document.body.appendChild(instance.$el);\n\n        // 等待加载完成就显示出来\n        Vue.nextTick(() => {\n            instance.visible = true;\n        });\n      }\n   };\n\n   myLoader.hide = function(id = '') {\n      // 自己添加的逻辑\n      if (id && idlader_arr.length) {\n        // 新建一个属于自己的Loader\n        let myinstance\n\n        // 从缓存中遍历看看有没有和id一样的Loader\n        for (let [index,ele] of idlader_arr.entries()) {\n            if (Object.keys(ele)[0] + '' == id) {\n                myinstance = Object.values(ele)[0];\n                break;\n            }\n        }\n        // 如果缓存列表中存在该id，则隐藏指定的Loader\n        if (myinstance) myinstance.visible = false\n\n      // 官方本来的逻辑\n      } else {\n        if (instance) {\n          instance.visible = false;\n        }\n      }\n   };\n\n   myLoader.hideAll = function () {\n       if (instance) {\n         instance.visible = false;\n       }\n\n       for (let [index,ele] of idlader_arr.entries()) {\n           Object.values(ele)[0].visible = false\n       }\n   };\n\n   Vue.prototype.Loader = myLoader;\n   window.Loader = myLoader;\n\n})(window, Vue);"]}